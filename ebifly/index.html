<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>„Ç®„Éì„Éï„É©„Ç§„ÅÆÊòü„Ç≠„É£„ÉÉ„ÉÅ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            user-select: none;
            -webkit-user-select: none;
            -webkit-touch-callout: none;
        }

        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            font-family: 'Segoe UI', 'Hiragino Sans', sans-serif;
            overflow: hidden;
        }

        #gameContainer {
            position: relative;
            touch-action: none;
        }

        #gameCanvas {
            display: block;
            border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        }

        #ui {
            position: absolute;
            top: 10px;
            left: 10px;
            right: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            pointer-events: none;
        }

        #lives {
            font-size: 28px;
        }

        #score {
            background: rgba(255, 255, 255, 0.9);
            padding: 8px 20px;
            border-radius: 25px;
            font-size: 20px;
            font-weight: bold;
            color: #764ba2;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
        }

        #level {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            padding: 8px 16px;
            border-radius: 25px;
            font-size: 18px;
            font-weight: bold;
            color: white;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
        }

        #timer {
            position: absolute;
            top: 50px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.5);
            padding: 5px 15px;
            border-radius: 15px;
            font-size: 16px;
            font-weight: bold;
            color: white;
            pointer-events: none;
        }

        #startScreen, #gameOverScreen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
        }

        #gameOverScreen {
            display: none;
        }

        h1 {
            font-size: 32px;
            color: #764ba2;
            margin-bottom: 10px;
            text-align: center;
        }

        .subtitle {
            font-size: 18px;
            color: #666;
            margin-bottom: 30px;
        }

        .ebifly-icon {
            font-size: 80px;
            margin-bottom: 20px;
        }

        button {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            border: none;
            padding: 15px 50px;
            font-size: 24px;
            color: white;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 5px 20px rgba(240, 147, 251, 0.4);
            transition: transform 0.2s, box-shadow 0.2s;
            font-weight: bold;
        }

        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(240, 147, 251, 0.5);
        }

        button:active {
            transform: translateY(0);
        }

        #finalScore {
            font-size: 48px;
            color: #f5576c;
            font-weight: bold;
            margin: 20px 0;
        }

        .hint {
            font-size: 14px;
            color: #999;
            margin-top: 20px;
        }

        .controls {
            display: flex;
            gap: 20px;
            margin-top: 20px;
        }

        .control-btn {
            width: 80px;
            height: 80px;
            font-size: 36px;
            border-radius: 50%;
            display: none;
        }

        @media (pointer: coarse) {
            .control-btn {
                display: flex;
                justify-content: center;
                align-items: center;
            }
        }
    </style>
</head>
<body>
    <div id="gameContainer">
        <canvas id="gameCanvas"></canvas>

        <div id="ui">
            <div id="lives">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</div>
            <div id="level">Lv.1</div>
            <div id="score">‚≠ê 0</div>
        </div>
        <div id="timer">0:00</div>

        <div id="startScreen">
            <div class="ebifly-icon">üç§</div>
            <h1>„Ç®„Éì„Éï„É©„Ç§„ÅÆÊòü„Ç≠„É£„ÉÉ„ÉÅ</h1>
            <p class="subtitle">‚≠ê Êòü„Çí„ÅÇ„Å§„ÇÅ„Å¶ üí£ ÁàÜÂºæ„Çí„Çà„Åë„Çà„ÅÜÔºÅ</p>
            <button id="startBtn">„Çπ„Çø„Éº„Éà</button>
            <p class="hint">‚Üê ‚Üí „Ç≠„Éº„Åæ„Åü„ÅØ„Çø„ÉÉ„ÉÅ„ÅßÁßªÂãïÔΩú„Çπ„Éö„Éº„Çπ„Ç≠„Éº„Åß„Çπ„Çø„Éº„Éà</p>
        </div>

        <div id="gameOverScreen">
            <h1>„Ç≤„Éº„É†„Ç™„Éº„Éê„Éº</h1>
            <p class="subtitle">„ÅÇ„Å§„ÇÅ„ÅüÊòü„ÅÆÊï∞</p>
            <div id="finalScore">0</div>
            <button id="restartBtn">„ÇÇ„ÅÜ„ÅÑ„Å°„Å©</button>
        </div>

        <div class="controls">
            <button class="control-btn" id="leftBtn">‚óÄ</button>
            <button class="control-btn" id="rightBtn">‚ñ∂</button>
        </div>
    </div>

    <script>
        // „Ç≤„Éº„É†Ë®≠ÂÆö
        const CONFIG = {
            canvasWidth: 400,
            canvasHeight: 600,
            playerWidth: 60,
            playerHeight: 60,
            playerSpeed: 8,
            bombSize: 40,
            starSize: 35,
            initialBombInterval: 1500,
            minBombInterval: 400,
            starInterval: 3000,
            difficultyIncreaseInterval: 5000,
            itemFallSpeed: 4,
            maxFallSpeed: 10
        };

        // „Ç≤„Éº„É†Áä∂ÊÖã
        let canvas, ctx;
        let gameRunning = false;
        let player = { x: 0, y: 0 };
        let bombs = [];
        let stars = [];
        let explosions = [];
        let score = 0;
        let lives = 3;
        let bombInterval = CONFIG.initialBombInterval;
        let starInterval = CONFIG.starInterval;
        let fallSpeed = CONFIG.itemFallSpeed;
        let lastBombTime = 0;
        let lastStarTime = 0;
        let lastDifficultyTime = 0;
        let gameStartTime = 0;
        let level = 1;
        let moveLeft = false;
        let moveRight = false;

        // DOMË¶ÅÁ¥†
        const startScreen = document.getElementById('startScreen');
        const gameOverScreen = document.getElementById('gameOverScreen');
        const livesDisplay = document.getElementById('lives');
        const scoreDisplay = document.getElementById('score');
        const levelDisplay = document.getElementById('level');
        const timerDisplay = document.getElementById('timer');
        const finalScoreDisplay = document.getElementById('finalScore');
        const startBtn = document.getElementById('startBtn');
        const restartBtn = document.getElementById('restartBtn');
        const leftBtn = document.getElementById('leftBtn');
        const rightBtn = document.getElementById('rightBtn');

        // „Ç™„Éº„Éá„Ç£„Ç™
        let audioCtx = null;

        function initAudio() {
            if (!audioCtx) {
                audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            }
        }

        // Êòü„Ç≠„É£„ÉÉ„ÉÅÈü≥Ôºà„Ç≠„É©„Ç≠„É©Ôºâ
        function playStarSound() {
            if (!audioCtx) return;
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.connect(gain);
            gain.connect(audioCtx.destination);
            osc.type = 'sine';
            osc.frequency.setValueAtTime(880, audioCtx.currentTime);
            osc.frequency.exponentialRampToValueAtTime(1760, audioCtx.currentTime + 0.1);
            gain.gain.setValueAtTime(0.3, audioCtx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.2);
            osc.start(audioCtx.currentTime);
            osc.stop(audioCtx.currentTime + 0.2);
        }

        // ÁàÜÁô∫Èü≥Ôºà„Éâ„Ç´„É≥Ôºâ
        function playExplosionSound() {
            if (!audioCtx) return;
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.connect(gain);
            gain.connect(audioCtx.destination);
            osc.type = 'sawtooth';
            osc.frequency.setValueAtTime(150, audioCtx.currentTime);
            osc.frequency.exponentialRampToValueAtTime(30, audioCtx.currentTime + 0.3);
            gain.gain.setValueAtTime(0.4, audioCtx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);
            osc.start(audioCtx.currentTime);
            osc.stop(audioCtx.currentTime + 0.3);
        }

        // „Ç≤„Éº„É†„Ç™„Éº„Éê„ÉºÈü≥
        function playGameOverSound() {
            if (!audioCtx) return;
            const notes = [440, 370, 330, 220];
            notes.forEach((freq, i) => {
                const osc = audioCtx.createOscillator();
                const gain = audioCtx.createGain();
                osc.connect(gain);
                gain.connect(audioCtx.destination);
                osc.type = 'square';
                osc.frequency.value = freq;
                gain.gain.setValueAtTime(0.2, audioCtx.currentTime + i * 0.2);
                gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + i * 0.2 + 0.2);
                osc.start(audioCtx.currentTime + i * 0.2);
                osc.stop(audioCtx.currentTime + i * 0.2 + 0.25);
            });
        }

        // „É¨„Éô„É´„Ç¢„ÉÉ„ÉóÈü≥
        function playLevelUpSound() {
            if (!audioCtx) return;
            const notes = [523, 659, 784, 1047];
            notes.forEach((freq, i) => {
                const osc = audioCtx.createOscillator();
                const gain = audioCtx.createGain();
                osc.connect(gain);
                gain.connect(audioCtx.destination);
                osc.type = 'sine';
                osc.frequency.value = freq;
                gain.gain.setValueAtTime(0.2, audioCtx.currentTime + i * 0.1);
                gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + i * 0.1 + 0.15);
                osc.start(audioCtx.currentTime + i * 0.1);
                osc.stop(audioCtx.currentTime + i * 0.1 + 0.2);
            });
        }

        // ÂàùÊúüÂåñ
        function init() {
            canvas = document.getElementById('gameCanvas');
            ctx = canvas.getContext('2d');

            // „Ç≠„É£„É≥„Éê„Çπ„Çµ„Ç§„Ç∫Ë™øÊï¥
            resizeCanvas();
            window.addEventListener('resize', resizeCanvas);

            // „Ç§„Éô„É≥„Éà„É™„Çπ„Éä„Éº
            startBtn.addEventListener('click', startGame);
            restartBtn.addEventListener('click', startGame);

            // „Ç≠„Éº„Éú„Éº„ÉâÊìç‰Ωú
            document.addEventListener('keydown', (e) => {
                if (e.key === 'ArrowLeft') moveLeft = true;
                if (e.key === 'ArrowRight') moveRight = true;
                // „Çπ„Éö„Éº„Çπ„Ç≠„Éº„Åß„Çπ„Çø„Éº„Éà/„É™„Çπ„Çø„Éº„Éà
                if (e.key === ' ' || e.code === 'Space') {
                    e.preventDefault();
                    if (!gameRunning) {
                        startGame();
                    }
                }
            });
            document.addEventListener('keyup', (e) => {
                if (e.key === 'ArrowLeft') moveLeft = false;
                if (e.key === 'ArrowRight') moveRight = false;
            });

            // „Çø„ÉÉ„ÉÅ/„ÇØ„É™„ÉÉ„ÇØÊìç‰ΩúÔºà„Ç≠„É£„É≥„Éê„Çπ‰∏äÔºâ
            canvas.addEventListener('touchmove', handleTouch, { passive: false });
            canvas.addEventListener('touchstart', handleTouch, { passive: false });
            canvas.addEventListener('mousemove', handleMouse);

            // „É¢„Éê„Ç§„É´„Éú„Çø„É≥
            leftBtn.addEventListener('touchstart', (e) => { e.preventDefault(); moveLeft = true; });
            leftBtn.addEventListener('touchend', () => moveLeft = false);
            leftBtn.addEventListener('mousedown', () => moveLeft = true);
            leftBtn.addEventListener('mouseup', () => moveLeft = false);
            leftBtn.addEventListener('mouseleave', () => moveLeft = false);

            rightBtn.addEventListener('touchstart', (e) => { e.preventDefault(); moveRight = true; });
            rightBtn.addEventListener('touchend', () => moveRight = false);
            rightBtn.addEventListener('mousedown', () => moveRight = true);
            rightBtn.addEventListener('mouseup', () => moveRight = false);
            rightBtn.addEventListener('mouseleave', () => moveRight = false);

            // ÂàùÊúüÊèèÁîª
            drawBackground();
        }

        function resizeCanvas() {
            const maxWidth = Math.min(window.innerWidth - 20, CONFIG.canvasWidth);
            const scale = maxWidth / CONFIG.canvasWidth;
            canvas.width = CONFIG.canvasWidth;
            canvas.height = CONFIG.canvasHeight;
            canvas.style.width = maxWidth + 'px';
            canvas.style.height = (CONFIG.canvasHeight * scale) + 'px';
        }

        function handleTouch(e) {
            if (!gameRunning) return;
            e.preventDefault();
            const touch = e.touches[0];
            const rect = canvas.getBoundingClientRect();
            const scaleX = canvas.width / rect.width;
            const x = (touch.clientX - rect.left) * scaleX;
            player.x = x - CONFIG.playerWidth / 2;
            clampPlayerPosition();
        }

        function handleMouse(e) {
            if (!gameRunning) return;
            const rect = canvas.getBoundingClientRect();
            const scaleX = canvas.width / rect.width;
            const x = (e.clientX - rect.left) * scaleX;
            player.x = x - CONFIG.playerWidth / 2;
            clampPlayerPosition();
        }

        function clampPlayerPosition() {
            player.x = Math.max(0, Math.min(canvas.width - CONFIG.playerWidth, player.x));
        }

        function startGame() {
            // „Ç™„Éº„Éá„Ç£„Ç™ÂàùÊúüÂåñ
            initAudio();
            // Áä∂ÊÖã„É™„Çª„ÉÉ„Éà
            gameRunning = true;
            score = 0;
            lives = 3;
            level = 1;
            bombs = [];
            stars = [];
            explosions = [];
            bombInterval = CONFIG.initialBombInterval;
            starInterval = CONFIG.starInterval;
            fallSpeed = CONFIG.itemFallSpeed;
            lastBombTime = 0;
            lastStarTime = 0;
            lastDifficultyTime = 0;
            gameStartTime = performance.now();

            player.x = (canvas.width - CONFIG.playerWidth) / 2;
            player.y = canvas.height - CONFIG.playerHeight - 20;

            startScreen.style.display = 'none';
            gameOverScreen.style.display = 'none';
            updateUI();

            requestAnimationFrame(gameLoop);
        }

        function gameLoop(timestamp) {
            if (!gameRunning) return;

            update(timestamp);
            draw();

            requestAnimationFrame(gameLoop);
        }

        function update(timestamp) {
            // „Éó„É¨„Ç§„É§„ÉºÁßªÂãï
            if (moveLeft) player.x -= CONFIG.playerSpeed;
            if (moveRight) player.x += CONFIG.playerSpeed;
            clampPlayerPosition();

            // ÁµåÈÅéÊôÇÈñì„ÇíÊõ¥Êñ∞
            const elapsedTime = timestamp - gameStartTime;
            const seconds = Math.floor(elapsedTime / 1000);
            const minutes = Math.floor(seconds / 60);
            const secs = seconds % 60;
            timerDisplay.textContent = `${minutes}:${secs.toString().padStart(2, '0')}`;

            // Èõ£ÊòìÂ∫¶‰∏äÊòáÔºà10Áßí„Åî„Å®„Å´„É¨„Éô„É´„Ç¢„ÉÉ„ÉóÔºâ
            const newLevel = Math.floor(seconds / 10) + 1;
            if (newLevel > level) {
                level = newLevel;
                // Èõ£ÊòìÂ∫¶‰∏äÊòá„ÇíÂº∑ÂåñÔºàÁàÜÂºæÈñìÈöî„Åï„Çâ„Å´1.5ÂÄçÔºâ
                bombInterval = Math.max(CONFIG.minBombInterval, CONFIG.initialBombInterval - (level - 1) * 338);
                fallSpeed = Math.min(CONFIG.maxFallSpeed, CONFIG.itemFallSpeed + (level - 1) * 0.75);
                // „É¨„Éô„É´6‰ª•Èôç„ÅØÊòü„ÅÆÊäï‰∏ãÈñìÈöî„ÇÇÁü≠„Åè„Åô„ÇãÔºàÂæóÁÇπ„ÉÅ„É£„É≥„ÇπÂ¢óÂä†Ôºâ1.5ÂÄçÈÄü
                if (level >= 6) {
                    starInterval = Math.max(800, CONFIG.starInterval - (level - 5) * 600);
                }
                playLevelUpSound();
                updateUI();
            }

            // ÁàÜÂºæÁîüÊàê
            if (timestamp - lastBombTime > bombInterval) {
                spawnBomb();
                lastBombTime = timestamp;
            }

            // ÊòüÁîüÊàê
            if (timestamp - lastStarTime > starInterval) {
                spawnStar();
                lastStarTime = timestamp;
            }

            // „Ç¢„Ç§„ÉÜ„É†Êõ¥Êñ∞
            updateItems();

            // ÂΩì„Åü„ÇäÂà§ÂÆö
            checkCollisions();
        }

        function spawnBomb() {
            bombs.push({
                x: Math.random() * (canvas.width - CONFIG.bombSize),
                y: -CONFIG.bombSize,
                rotation: 0
            });
        }

        function spawnStar() {
            stars.push({
                x: Math.random() * (canvas.width - CONFIG.starSize),
                y: -CONFIG.starSize,
                rotation: 0
            });
        }

        function updateItems() {
            // ÁàÜÂºæÁßªÂãï
            bombs = bombs.filter(bomb => {
                bomb.y += fallSpeed;
                bomb.rotation += 0.1;
                return bomb.y < canvas.height + CONFIG.bombSize;
            });

            // ÊòüÁßªÂãï
            stars = stars.filter(star => {
                star.y += fallSpeed * 0.8;
                star.rotation += 0.05;
                return star.y < canvas.height + CONFIG.starSize;
            });

            // ÁàÜÁô∫Êõ¥Êñ∞
            explosions = explosions.filter(exp => {
                exp.particles.forEach(p => {
                    p.x += p.vx;
                    p.y += p.vy;
                    p.vy += 0.3; // ÈáçÂäõ
                    p.life -= 0.02;
                    p.size *= 0.97;
                });
                exp.particles = exp.particles.filter(p => p.life > 0);
                return exp.particles.length > 0;
            });
        }

        function createExplosion(x, y) {
            const particles = [];
            const colors = ['#FF6B6B', '#FFE66D', '#FF8E53', '#FF5722', '#FFC107'];
            for (let i = 0; i < 20; i++) {
                const angle = (Math.PI * 2 / 20) * i;
                const speed = 3 + Math.random() * 4;
                particles.push({
                    x: x,
                    y: y,
                    vx: Math.cos(angle) * speed,
                    vy: Math.sin(angle) * speed - 2,
                    size: 8 + Math.random() * 8,
                    color: colors[Math.floor(Math.random() * colors.length)],
                    life: 1
                });
            }
            explosions.push({ particles });
        }

        function checkCollisions() {
            const playerRect = {
                x: player.x + 10,
                y: player.y + 10,
                width: CONFIG.playerWidth - 20,
                height: CONFIG.playerHeight - 20
            };

            // ÁàÜÂºæ„Å®„ÅÆÂΩì„Åü„ÇäÂà§ÂÆö
            bombs = bombs.filter(bomb => {
                if (isColliding(playerRect, {
                    x: bomb.x + 5,
                    y: bomb.y + 5,
                    width: CONFIG.bombSize - 10,
                    height: CONFIG.bombSize - 10
                })) {
                    // ÁàÜÁô∫„Ç®„Éï„Çß„ÇØ„ÉàÁîüÊàê
                    createExplosion(bomb.x + CONFIG.bombSize / 2, bomb.y + CONFIG.bombSize / 2);
                    playExplosionSound();
                    lives--;
                    updateUI();
                    if (lives <= 0) {
                        gameOver();
                    }
                    return false;
                }
                return true;
            });

            // Êòü„Å®„ÅÆÂΩì„Åü„ÇäÂà§ÂÆö
            stars = stars.filter(star => {
                if (isColliding(playerRect, {
                    x: star.x,
                    y: star.y,
                    width: CONFIG.starSize,
                    height: CONFIG.starSize
                })) {
                    score++;
                    playStarSound();
                    updateUI();
                    return false;
                }
                return true;
            });
        }

        function isColliding(rect1, rect2) {
            return rect1.x < rect2.x + rect2.width &&
                   rect1.x + rect1.width > rect2.x &&
                   rect1.y < rect2.y + rect2.height &&
                   rect1.y + rect1.height > rect2.y;
        }

        function updateUI() {
            livesDisplay.textContent = '‚ù§Ô∏è'.repeat(lives) + 'üñ§'.repeat(3 - lives);
            scoreDisplay.textContent = `‚≠ê ${score}`;
            levelDisplay.textContent = `Lv.${level}`;
        }

        function gameOver() {
            gameRunning = false;
            playGameOverSound();
            finalScoreDisplay.textContent = score;
            gameOverScreen.style.display = 'flex';
        }

        function draw() {
            drawBackground();
            drawItems();
            drawExplosions();
            drawPlayer();
        }

        function drawExplosions() {
            explosions.forEach(exp => {
                exp.particles.forEach(p => {
                    ctx.save();
                    ctx.globalAlpha = p.life;
                    ctx.fillStyle = p.color;
                    ctx.beginPath();
                    ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
                    ctx.fill();
                    ctx.restore();
                });
            });
        }

        function drawBackground() {
            // „Ç∞„É©„Éá„Éº„Ç∑„Éß„É≥ËÉåÊôØ
            const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
            gradient.addColorStop(0, '#87CEEB');
            gradient.addColorStop(0.5, '#98D8C8');
            gradient.addColorStop(1, '#90EE90');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // Èõ≤„ÇíÊèèÁîª
            ctx.fillStyle = 'rgba(255, 255, 255, 0.8)';
            drawCloud(50, 80, 40);
            drawCloud(200, 120, 35);
            drawCloud(320, 60, 45);
            drawCloud(100, 200, 30);
            drawCloud(280, 180, 38);
        }

        function drawCloud(x, y, size) {
            ctx.beginPath();
            ctx.arc(x, y, size, 0, Math.PI * 2);
            ctx.arc(x + size * 0.8, y - size * 0.2, size * 0.7, 0, Math.PI * 2);
            ctx.arc(x + size * 1.5, y, size * 0.8, 0, Math.PI * 2);
            ctx.fill();
        }

        function drawItems() {
            // ÁàÜÂºæÊèèÁîª
            bombs.forEach(bomb => {
                ctx.save();
                ctx.translate(bomb.x + CONFIG.bombSize / 2, bomb.y + CONFIG.bombSize / 2);
                ctx.rotate(bomb.rotation);
                ctx.font = `${CONFIG.bombSize}px serif`;
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText('üí£', 0, 0);
                ctx.restore();
            });

            // ÊòüÊèèÁîª
            stars.forEach(star => {
                ctx.save();
                ctx.translate(star.x + CONFIG.starSize / 2, star.y + CONFIG.starSize / 2);
                ctx.rotate(Math.sin(star.rotation) * 0.2);
                ctx.font = `${CONFIG.starSize}px serif`;
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText('‚≠ê', 0, 0);
                ctx.restore();
            });
        }

        function drawPlayer() {
            ctx.save();
            ctx.translate(player.x + CONFIG.playerWidth / 2, player.y + CONFIG.playerHeight / 2);

            // Â∞ë„ÅóÊè∫„Çå„Çã„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥
            const wobble = Math.sin(Date.now() / 200) * 0.1;
            ctx.rotate(wobble);

            ctx.font = `${CONFIG.playerWidth}px serif`;
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText('üç§', 0, 0);
            ctx.restore();
        }

        // „Ç≤„Éº„É†ÈñãÂßã
        init();
    </script>
</body>
</html>
