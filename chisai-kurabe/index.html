<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã¡ã„ã•ã„ã‚‚ã®ãã‚‰ã¹</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;500;700;900&family=Fredoka:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-deep: #0a0e27;
            --bg-mid: #151b3d;
            --bg-card: rgba(30, 40, 80, 0.6);
            --accent-cyan: #00e5ff;
            --accent-magenta: #ff00aa;
            --accent-yellow: #ffe600;
            --accent-green: #00ff88;
            --text-primary: #ffffff;
            --text-secondary: rgba(255, 255, 255, 0.7);
            --glow-cyan: 0 0 30px rgba(0, 229, 255, 0.4);
            --glow-magenta: 0 0 30px rgba(255, 0, 170, 0.4);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Zen Maru Gothic', sans-serif;
            background: var(--bg-deep);
            min-height: 100vh;
            color: var(--text-primary);
            overflow-x: hidden;
        }

        /* Animated background */
        .bg-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            overflow: hidden;
        }

        .bg-gradient {
            position: absolute;
            width: 100%;
            height: 100%;
            background:
                radial-gradient(ellipse 80% 50% at 20% 20%, rgba(0, 229, 255, 0.15) 0%, transparent 50%),
                radial-gradient(ellipse 60% 40% at 80% 80%, rgba(255, 0, 170, 0.12) 0%, transparent 50%),
                radial-gradient(ellipse 50% 30% at 50% 50%, rgba(0, 255, 136, 0.08) 0%, transparent 50%);
        }

        .particle {
            position: absolute;
            border-radius: 50%;
            pointer-events: none;
            animation: float 20s infinite ease-in-out;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0) translateX(0) scale(1); opacity: 0.3; }
            25% { transform: translateY(-30px) translateX(20px) scale(1.1); opacity: 0.6; }
            50% { transform: translateY(-10px) translateX(-20px) scale(0.9); opacity: 0.4; }
            75% { transform: translateY(-40px) translateX(10px) scale(1.05); opacity: 0.5; }
        }

        /* Grid pattern overlay */
        .grid-overlay {
            position: absolute;
            width: 100%;
            height: 100%;
            background-image:
                linear-gradient(rgba(0, 229, 255, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 229, 255, 0.03) 1px, transparent 1px);
            background-size: 50px 50px;
            animation: gridMove 30s linear infinite;
        }

        @keyframes gridMove {
            0% { transform: translate(0, 0); }
            100% { transform: translate(50px, 50px); }
        }

        /* Main container */
        .main-container {
            position: relative;
            z-index: 1;
            max-width: 1000px;
            margin: 0 auto;
            padding: 30px 20px;
            min-height: 100vh;
        }

        /* Header */
        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        .title {
            font-size: clamp(2.5rem, 8vw, 4rem);
            font-weight: 900;
            background: linear-gradient(135deg, var(--accent-cyan), var(--accent-magenta), var(--accent-yellow));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: none;
            filter: drop-shadow(0 0 30px rgba(0, 229, 255, 0.3));
            letter-spacing: 0.05em;
            animation: titlePulse 3s ease-in-out infinite;
        }

        @keyframes titlePulse {
            0%, 100% { filter: drop-shadow(0 0 30px rgba(0, 229, 255, 0.3)); }
            50% { filter: drop-shadow(0 0 50px rgba(255, 0, 170, 0.4)); }
        }

        .subtitle {
            font-size: 1.1rem;
            color: var(--text-secondary);
            margin-top: 15px;
            font-weight: 400;
        }

        /* Hiragana mode toggle */
        .mode-toggle {
            display: flex;
            justify-content: center;
            margin: 25px 0;
        }

        .toggle-btn {
            background: var(--bg-card);
            border: 2px solid rgba(0, 229, 255, 0.3);
            border-radius: 50px;
            padding: 12px 30px;
            color: var(--text-primary);
            font-family: 'Zen Maru Gothic', sans-serif;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .toggle-btn:hover {
            border-color: var(--accent-cyan);
            box-shadow: var(--glow-cyan);
        }

        .toggle-btn.active {
            background: linear-gradient(135deg, rgba(0, 229, 255, 0.2), rgba(255, 0, 170, 0.2));
            border-color: var(--accent-magenta);
            box-shadow: var(--glow-magenta);
        }

        .toggle-icon {
            font-size: 1.3rem;
        }

        /* Comparison section */
        .comparison-section {
            background: var(--bg-card);
            border-radius: 30px;
            padding: 40px 30px;
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow:
                0 20px 60px rgba(0, 0, 0, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        .selectors {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 20px;
            align-items: center;
            margin-bottom: 40px;
        }

        @media (max-width: 600px) {
            .selectors {
                grid-template-columns: 1fr;
                gap: 15px;
            }
        }

        .selector-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .selector-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
            text-align: center;
        }

        .dropdown {
            appearance: none;
            background: rgba(10, 14, 39, 0.8);
            border: 2px solid rgba(0, 229, 255, 0.3);
            border-radius: 15px;
            padding: 15px 45px 15px 20px;
            color: var(--text-primary);
            font-family: 'Zen Maru Gothic', sans-serif;
            font-size: 1.1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%2300e5ff' stroke-width='2'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 15px center;
        }

        .dropdown:hover, .dropdown:focus {
            border-color: var(--accent-cyan);
            box-shadow: var(--glow-cyan);
            outline: none;
        }

        .dropdown option {
            background: var(--bg-deep);
            padding: 10px;
        }

        .vs-badge {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--accent-magenta), var(--accent-cyan));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Fredoka', sans-serif;
            font-size: 1.2rem;
            font-weight: 700;
            box-shadow: 0 0 30px rgba(255, 0, 170, 0.4);
            animation: vsPulse 2s ease-in-out infinite;
        }

        @keyframes vsPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        /* Visual comparison */
        .visual-comparison {
            position: relative;
            min-height: 300px;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 60px;
            padding: 30px;
        }

        @media (max-width: 600px) {
            .visual-comparison {
                flex-direction: column;
                gap: 40px;
            }
        }

        .item-display {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            flex: 1;
            max-width: 300px;
        }

        .item-visual {
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 150px;
        }

        .item-circle {
            border-radius: 50%;
            transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            position: relative;
        }

        .item-circle::after {
            content: '';
            position: absolute;
            inset: -5px;
            border-radius: 50%;
            border: 2px dashed rgba(255, 255, 255, 0.2);
            animation: rotate 20s linear infinite;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .item-circle.left {
            background: linear-gradient(135deg, rgba(0, 229, 255, 0.3), rgba(0, 229, 255, 0.1));
            border: 3px solid var(--accent-cyan);
            box-shadow: var(--glow-cyan), inset 0 0 30px rgba(0, 229, 255, 0.1);
        }

        .item-circle.right {
            background: linear-gradient(135deg, rgba(255, 0, 170, 0.3), rgba(255, 0, 170, 0.1));
            border: 3px solid var(--accent-magenta);
            box-shadow: var(--glow-magenta), inset 0 0 30px rgba(255, 0, 170, 0.1);
        }

        .item-name {
            font-size: 1.3rem;
            font-weight: 700;
            text-align: center;
        }

        .item-name.left {
            color: var(--accent-cyan);
        }

        .item-name.right {
            color: var(--accent-magenta);
        }

        .item-size {
            font-family: 'Fredoka', sans-serif;
            font-size: 1rem;
            color: var(--text-secondary);
            text-align: center;
        }

        /* Result section */
        .result-section {
            margin-top: 40px;
            text-align: center;
            padding: 30px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .result-text {
            font-size: 1.4rem;
            font-weight: 700;
            line-height: 1.8;
        }

        .highlight-cyan {
            color: var(--accent-cyan);
        }

        .highlight-magenta {
            color: var(--accent-magenta);
        }

        .highlight-yellow {
            color: var(--accent-yellow);
        }

        .ratio-display {
            margin-top: 20px;
            font-family: 'Fredoka', sans-serif;
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--accent-yellow), var(--accent-green));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .ratio-label {
            font-size: 1rem;
            color: var(--text-secondary);
            margin-top: 5px;
        }

        /* Scale bar */
        .scale-bar {
            margin-top: 30px;
            padding: 20px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 15px;
        }

        .scale-title {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin-bottom: 15px;
        }

        .scale-track {
            position: relative;
            height: 40px;
            background: linear-gradient(90deg,
                var(--accent-cyan) 0%,
                var(--accent-green) 25%,
                var(--accent-yellow) 50%,
                var(--accent-magenta) 100%);
            border-radius: 20px;
            overflow: hidden;
        }

        .scale-labels {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            font-size: 0.75rem;
            color: var(--text-secondary);
            font-family: 'Fredoka', sans-serif;
        }

        .scale-marker {
            position: absolute;
            top: 50%;
            transform: translate(-50%, -50%);
            width: 20px;
            height: 20px;
            background: white;
            border-radius: 50%;
            border: 3px solid var(--bg-deep);
            transition: left 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            z-index: 2;
        }

        .scale-marker.marker-left {
            box-shadow: 0 0 10px var(--accent-cyan);
        }

        .scale-marker.marker-right {
            box-shadow: 0 0 10px var(--accent-magenta);
        }

        /* Fun facts */
        .fun-fact {
            margin-top: 30px;
            padding: 20px 25px;
            background: linear-gradient(135deg, rgba(255, 230, 0, 0.1), rgba(0, 255, 136, 0.1));
            border-radius: 15px;
            border-left: 4px solid var(--accent-yellow);
        }

        .fun-fact-icon {
            font-size: 1.5rem;
            margin-right: 10px;
        }

        .fun-fact-text {
            font-size: 1rem;
            line-height: 1.6;
            color: var(--text-primary);
        }

        /* Footer */
        .footer {
            text-align: center;
            margin-top: 50px;
            padding: 20px;
            color: var(--text-secondary);
            font-size: 0.85rem;
        }

        /* Animations for mode switch */
        .hiragana-mode .kanji-text {
            display: none;
        }

        .hiragana-mode .hiragana-text {
            display: inline;
        }

        .normal-mode .kanji-text {
            display: inline;
        }

        .normal-mode .hiragana-text {
            display: none;
        }

        /* Microscope decoration */
        .microscope-icon {
            position: fixed;
            bottom: 20px;
            right: 20px;
            font-size: 3rem;
            opacity: 0.2;
            animation: microscopeFloat 4s ease-in-out infinite;
        }

        @keyframes microscopeFloat {
            0%, 100% { transform: translateY(0) rotate(-5deg); }
            50% { transform: translateY(-10px) rotate(5deg); }
        }
    </style>
</head>
<body class="normal-mode">
    <div class="bg-container">
        <div class="bg-gradient"></div>
        <div class="grid-overlay"></div>
        <!-- Particles will be added by JS -->
    </div>

    <div class="main-container">
        <header class="header">
            <h1 class="title">
                <span class="kanji-text">ã¡ã„ã•ã„ã‚‚ã®ãã‚‰ã¹</span>
                <span class="hiragana-text">ã¡ã„ã•ã„ã‚‚ã®ãã‚‰ã¹</span>
            </h1>
            <p class="subtitle">
                <span class="kanji-text">ãŸã¾ã”ã‹ã‚‰ç´ ç²’å­ã¾ã§ã€ãƒŸã‚¯ãƒ­ã®ä¸–ç•Œã‚’å†’é™ºã—ã‚ˆã†ï¼</span>
                <span class="hiragana-text">ãŸã¾ã”ã‹ã‚‰ã„ã¡ã°ã‚“ã¡ã„ã•ã„ã‚‚ã®ã¾ã§ã€ãµã—ããªã›ã‹ã„ã‚’ãŸã‚“ã‘ã‚“ã—ã‚ˆã†ï¼</span>
            </p>
        </header>

        <div class="mode-toggle">
            <button class="toggle-btn" id="hiraganaToggle" onclick="toggleHiraganaMode()">
                <span class="toggle-icon">ã‚</span>
                <span class="kanji-text">ã²ã‚‰ãŒãªãƒ¢ãƒ¼ãƒ‰</span>
                <span class="hiragana-text">ã²ã‚‰ãŒãªã‚‚ãƒ¼ã©</span>
            </button>
        </div>

        <section class="comparison-section">
            <div class="selectors">
                <div class="selector-group">
                    <label class="selector-label">
                        <span class="kanji-text">ã²ã¨ã¤ã‚</span>
                        <span class="hiragana-text">ã²ã¨ã¤ã‚</span>
                    </label>
                    <select class="dropdown" id="item1" onchange="updateComparison()">
                    </select>
                </div>

                <div class="vs-badge">VS</div>

                <div class="selector-group">
                    <label class="selector-label">
                        <span class="kanji-text">ãµãŸã¤ã‚</span>
                        <span class="hiragana-text">ãµãŸã¤ã‚</span>
                    </label>
                    <select class="dropdown" id="item2" onchange="updateComparison()">
                    </select>
                </div>
            </div>

            <div class="visual-comparison">
                <div class="item-display">
                    <div class="item-visual">
                        <div class="item-circle left" id="circle1"></div>
                    </div>
                    <div class="item-name left" id="name1"></div>
                    <div class="item-size" id="size1"></div>
                </div>

                <div class="item-display">
                    <div class="item-visual">
                        <div class="item-circle right" id="circle2"></div>
                    </div>
                    <div class="item-name right" id="name2"></div>
                    <div class="item-size" id="size2"></div>
                </div>
            </div>

            <div class="result-section">
                <div class="result-text" id="resultText"></div>
                <div class="ratio-display" id="ratioDisplay"></div>
                <div class="ratio-label" id="ratioLabel"></div>
            </div>

            <div class="scale-bar">
                <div class="scale-title">
                    <span class="kanji-text">å¤§ãã•ã‚¹ã‚±ãƒ¼ãƒ«</span>
                    <span class="hiragana-text">ãŠãŠãã•ã™ã‘ãƒ¼ã‚‹</span>
                </div>
                <div class="scale-track">
                    <div class="scale-marker marker-left" id="marker1"></div>
                    <div class="scale-marker marker-right" id="marker2"></div>
                </div>
                <div class="scale-labels">
                    <span>10â»Â³âµm</span>
                    <span>10â»Â²â´m</span>
                    <span>10â»Â¹Â²m</span>
                    <span>10â»Â¹m</span>
                </div>
            </div>

            <div class="fun-fact" id="funFact">
                <span class="fun-fact-icon">ğŸ’¡</span>
                <span class="fun-fact-text" id="funFactText"></span>
            </div>
        </section>

        <footer class="footer">
            <span class="kanji-text">ç§‘å­¦ã®ä¸–ç•Œã¯ãµã—ããŒã„ã£ã±ã„ï¼</span>
            <span class="hiragana-text">ã‹ãŒãã®ã›ã‹ã„ã¯ ãµã—ããŒ ã„ã£ã±ã„ï¼</span>
        </footer>
    </div>

    <div class="microscope-icon">ğŸ”¬</div>

    <script>
        // Item data with sizes in meters
        const items = [
            {
                id: 'egg',
                name: 'é¶ã®åµ',
                hiragana: 'ã«ã‚ã¨ã‚Šã®ãŸã¾ã”',
                size: 0.06,
                emoji: 'ğŸ¥š',
                sizeText: 'ç´„6cm',
                sizeTextHiragana: 'ã‚„ã6ã›ã‚“ã¡',
                fact: 'é¶ã®åµã¯ã€ã²ã‚ˆã“ãŒè‚²ã¤ãŸã‚ã®æ „é¤ŠãŒãã£ã—ã‚Šè©°ã¾ã£ã¦ã„ã¾ã™ã€‚',
                factHiragana: 'ã«ã‚ã¨ã‚Šã®ãŸã¾ã”ã¯ã€ã²ã‚ˆã“ãŒãã ã¤ãŸã‚ã®ãˆã„ã‚ˆã†ãŒ ã„ã£ã±ã„ã¯ã„ã£ã¦ã„ã‚‹ã‚ˆã€‚'
            },
            {
                id: 'beetle',
                name: 'ã‚«ãƒ–ãƒˆãƒ ã‚·',
                hiragana: 'ã‹ã¶ã¨ã‚€ã—',
                size: 0.05,
                emoji: 'ğŸª²',
                sizeText: 'ç´„5cm',
                sizeTextHiragana: 'ã‚„ã5ã›ã‚“ã¡',
                fact: 'ã‚«ãƒ–ãƒˆãƒ ã‚·ã¯è‡ªåˆ†ã®ä½“é‡ã®20å€ä»¥ä¸Šã®é‡ã•ã‚’æŒã¡ä¸Šã’ã‚‰ã‚Œã¾ã™ï¼',
                factHiragana: 'ã‹ã¶ã¨ã‚€ã—ã¯ã€ã˜ã¶ã‚“ã®ã‹ã‚‰ã ã®20ã°ã„ã‚ˆã‚ŠãŠã‚‚ã„ã‚‚ã®ã‚’ ã‚‚ã¡ã‚ã’ã‚‰ã‚Œã‚‹ã‚ˆï¼'
            },
            {
                id: 'bee',
                name: 'ãƒãƒ',
                hiragana: 'ã¯ã¡',
                size: 0.013,
                emoji: 'ğŸ',
                sizeText: 'ç´„1.3cm',
                sizeTextHiragana: 'ã‚„ã1.3ã›ã‚“ã¡',
                fact: 'ãƒŸãƒ„ãƒãƒã¯èŠ±ã®èœœã‚’é›†ã‚ã¦ãƒãƒãƒŸãƒ„ã‚’ä½œã‚Šã¾ã™ã€‚1åŒ¹ãŒä¸€ç”Ÿã§ä½œã‚Œã‚‹ãƒãƒãƒŸãƒ„ã¯ã‚¹ãƒ—ãƒ¼ãƒ³1æ¯åˆ†ã ã‘ï¼',
                factHiragana: 'ã¿ã¤ã°ã¡ã¯ ã¯ãªã®ã¿ã¤ã‚’ ã‚ã¤ã‚ã¦ ã¯ã¡ã¿ã¤ã‚’ ã¤ãã‚‹ã‚ˆã€‚1ã´ããŒ ã„ã£ã—ã‚‡ã†ã§ ã¤ãã‚Œã‚‹ã®ã¯ ã™ã·ãƒ¼ã‚“1ã±ã„ã¶ã‚“ã ã‘ï¼'
            },
            {
                id: 'stinkbug',
                name: 'ã‚«ãƒ¡ãƒ ã‚·',
                hiragana: 'ã‹ã‚ã‚€ã—',
                size: 0.012,
                emoji: 'ğŸ›¡ï¸',
                sizeText: 'ç´„1.2cm',
                sizeTextHiragana: 'ã‚„ã1.2ã›ã‚“ã¡',
                fact: 'ã‚«ãƒ¡ãƒ ã‚·ã¯æ•µã«è¥²ã‚ã‚Œã‚‹ã¨è‡­ã„ã«ãŠã„ã‚’å‡ºã—ã¦èº«ã‚’å®ˆã‚Šã¾ã™ã€‚ã ã‹ã‚‰ã€Œãƒ˜ã‚¯ã‚µãƒ ã‚·ã€ã¨ã‚‚å‘¼ã°ã‚Œã¾ã™ã€‚',
                factHiragana: 'ã‹ã‚ã‚€ã—ã¯ ã¦ãã«ãŠãã‚ã‚Œã‚‹ã¨ ãã•ã„ã«ãŠã„ã‚’ã ã—ã¦ ã¿ã‚’ã¾ã‚‚ã‚‹ã‚ˆã€‚ã ã‹ã‚‰ã€Œã¸ã£ã´ã‚Šã‚€ã—ã€ã¨ã‚‚ã‚ˆã°ã‚Œã‚‹ã‚ˆã€‚'
            },
            {
                id: 'ladybug',
                name: 'ãƒ†ãƒ³ãƒˆã‚¦ãƒ ã‚·',
                hiragana: 'ã¦ã‚“ã¨ã†ã‚€ã—',
                size: 0.007,
                emoji: 'ğŸ',
                sizeText: 'ç´„7mm',
                sizeTextHiragana: 'ã‚„ã7ã¿ã‚Š',
                fact: 'ãƒ†ãƒ³ãƒˆã‚¦ãƒ ã‚·ã¯1æ—¥ã«100åŒ¹ä»¥ä¸Šã®ã‚¢ãƒ–ãƒ©ãƒ ã‚·ã‚’é£Ÿã¹ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚è¾²å®¶ã®å‘³æ–¹ã§ã™ï¼',
                factHiragana: 'ã¦ã‚“ã¨ã†ã‚€ã—ã¯ 1ã«ã¡ã« 100ã´ãã„ã˜ã‚‡ã†ã® ã‚ã¶ã‚‰ã‚€ã—ã‚’ ãŸã¹ã‚‰ã‚Œã‚‹ã‚ˆã€‚ã®ã†ã‹ã®ã¿ã‹ãŸï¼'
            },
            {
                id: 'ant',
                name: 'ã‚¢ãƒª',
                hiragana: 'ã‚ã‚Š',
                size: 0.003,
                emoji: 'ğŸœ',
                sizeText: 'ç´„3mm',
                sizeTextHiragana: 'ã‚„ã3ã¿ã‚Š',
                fact: 'ã‚¢ãƒªã¯åœ°çƒä¸Šã«1äº¬åŒ¹ï¼ˆ10,000,000,000,000,000åŒ¹ï¼‰ä»¥ä¸Šã„ã‚‹ã¨è¨€ã‚ã‚Œã¦ã„ã¾ã™ã€‚',
                factHiragana: 'ã‚ã‚Šã¯ ã¡ãã‚…ã†ã« ã™ã£ã”ããŸãã•ã‚“ã„ã‚‹ã‚ˆã€‚ã‹ããˆãã‚Œãªã„ãã‚‰ã„ï¼'
            },
            {
                id: 'aphid',
                name: 'ã‚¢ãƒ–ãƒ©ãƒ ã‚·',
                hiragana: 'ã‚ã¶ã‚‰ã‚€ã—',
                size: 0.002,
                emoji: 'ğŸ¦Ÿ',
                sizeText: 'ç´„2mm',
                sizeTextHiragana: 'ã‚„ã2ã¿ã‚Š',
                fact: 'ã‚¢ãƒ–ãƒ©ãƒ ã‚·ã¯æ¤ç‰©ã®æ±ã‚’å¸ã£ã¦ç”Ÿãã¦ã„ã¾ã™ã€‚ãƒ†ãƒ³ãƒˆã‚¦ãƒ ã‚·ã®å¤§å¥½ç‰©ã§ã™ï¼',
                factHiragana: 'ã‚ã¶ã‚‰ã‚€ã—ã¯ ã—ã‚‡ãã¶ã¤ã® ã—ã‚‹ã‚’ã™ã£ã¦ã‚‹ã‚ˆã€‚ã¦ã‚“ã¨ã†ã‚€ã—ã® ã ã„ã“ã†ã¶ã¤ï¼'
            },
            {
                id: 'tardigrade',
                name: 'ã‚¯ãƒãƒ ã‚·',
                hiragana: 'ãã¾ã‚€ã—',
                size: 0.0005,
                emoji: 'ğŸ»',
                sizeText: 'ç´„0.5mm',
                sizeTextHiragana: 'ã‚„ã0.5ã¿ã‚Š',
                fact: 'ã‚¯ãƒãƒ ã‚·ã¯å®‡å®™ç©ºé–“ã§ã‚‚ç”Ÿãã‚‰ã‚Œã‚‹åœ°çƒæœ€å¼·ã®ç”Ÿãç‰©ã§ã™ï¼',
                factHiragana: 'ãã¾ã‚€ã—ã¯ ã†ã¡ã‚…ã†ã§ã‚‚ã„ãã‚‰ã‚Œã‚‹ ã¡ãã‚…ã†ã§ã„ã¡ã°ã‚“ã¤ã‚ˆã„ã„ãã‚‚ã®ã ã‚ˆï¼'
            },
            {
                id: 'hair',
                name: 'é«ªã®æ¯›',
                hiragana: 'ã‹ã¿ã®ã‘',
                size: 0.00008,
                emoji: 'ğŸ’‡',
                sizeText: 'ç´„80Î¼mï¼ˆ0.08mmï¼‰',
                sizeTextHiragana: 'ã‚„ã0.08ã¿ã‚Š',
                fact: 'äººé–“ã®é«ªã®æ¯›ã¯1æ—¥ã«ç´„0.3ã€œ0.4mmä¼¸ã³ã¾ã™ã€‚',
                factHiragana: 'ã«ã‚“ã’ã‚“ã® ã‹ã¿ã®ã‘ã¯ ã¾ã„ã«ã¡ã™ã“ã—ãšã¤ ã®ã³ã¦ã„ã‚‹ã‚ˆã€‚'
            },
            {
                id: 'cell',
                name: 'äººé–“ã®ç´°èƒ',
                hiragana: 'ã«ã‚“ã’ã‚“ã®ã•ã„ã¼ã†',
                size: 0.00002,
                emoji: 'ğŸ§«',
                sizeText: 'ç´„20Î¼m',
                sizeTextHiragana: 'ã‚„ã0.02ã¿ã‚Š',
                fact: 'äººé–“ã®ä½“ã¯ç´„37å…†å€‹ã®ç´°èƒã§ã§ãã¦ã„ã¾ã™ã€‚',
                factHiragana: 'ã«ã‚“ã’ã‚“ã®ã‹ã‚‰ã ã¯ ã‚‚ã®ã™ã”ããŸãã•ã‚“ã® ã•ã„ã¼ã†ã§ ã§ãã¦ã„ã‚‹ã‚ˆã€‚'
            },
            {
                id: 'whiteblood',
                name: 'ç™½è¡€çƒ',
                hiragana: 'ã¯ã£ã‘ã£ãã‚…ã†',
                size: 0.000012,
                emoji: 'âšª',
                sizeText: 'ç´„12Î¼m',
                sizeTextHiragana: 'ã‚„ã0.012ã¿ã‚Š',
                fact: 'ç™½è¡€çƒã¯ä½“ã«å…¥ã£ã¦ããŸãƒã‚¤ã‚­ãƒ³ã‚’ã‚„ã£ã¤ã‘ã‚‹ã€ä½“ã®ä¸­ã®ãƒ’ãƒ¼ãƒ­ãƒ¼ã§ã™ï¼',
                factHiragana: 'ã¯ã£ã‘ã£ãã‚…ã†ã¯ ã°ã„ãã‚“ã‚’ã‚„ã£ã¤ã‘ã‚‹ ã‹ã‚‰ã ã®ãªã‹ã® ã²ãƒ¼ã‚ãƒ¼ã ã‚ˆï¼'
            },
            {
                id: 'redblood',
                name: 'èµ¤è¡€çƒ',
                hiragana: 'ã›ã£ã‘ã£ãã‚…ã†',
                size: 0.0000075,
                emoji: 'ğŸ”´',
                sizeText: 'ç´„7.5Î¼m',
                sizeTextHiragana: 'ã‚„ã0.0075ã¿ã‚Š',
                fact: 'èµ¤è¡€çƒã¯é…¸ç´ ã‚’ä½“ä¸­ã«å±Šã‘ã‚‹é…é”å“¡ã®ã‚ˆã†ãªç´°èƒã§ã™ã€‚',
                factHiragana: 'ã›ã£ã‘ã£ãã‚…ã†ã¯ ã•ã‚“ãã‚’ ã‹ã‚‰ã ã˜ã‚…ã†ã«ã¯ã“ã¶ ã¯ã„ãŸã¤ã„ã‚“ã•ã‚“ã ã‚ˆã€‚'
            },
            {
                id: 'nucleus',
                name: 'ç´°èƒæ ¸',
                hiragana: 'ã•ã„ã¼ã†ã‹ã',
                size: 0.000006,
                emoji: 'ğŸŸ£',
                sizeText: 'ç´„6Î¼m',
                sizeTextHiragana: 'ã‚„ã0.006ã¿ã‚Š',
                fact: 'ç´°èƒæ ¸ã«ã¯éºä¼å­ï¼ˆDNAï¼‰ãŒå…¥ã£ã¦ã„ã¦ã€ä½“ã®è¨­è¨ˆå›³ãŒæ›¸ã‹ã‚Œã¦ã„ã¾ã™ã€‚',
                factHiragana: 'ã•ã„ã¼ã†ã‹ãã«ã¯ ã‹ã‚‰ã ã®ã›ã£ã‘ã„ãšãŒ ã¯ã„ã£ã¦ã„ã‚‹ã‚ˆã€‚'
            },
            {
                id: 'mitochondria',
                name: 'ãƒŸãƒˆã‚³ãƒ³ãƒ‰ãƒªã‚¢',
                hiragana: 'ã¿ã¨ã“ã‚“ã©ã‚Šã‚',
                size: 0.0000015,
                emoji: 'âš¡',
                sizeText: 'ç´„1.5Î¼m',
                sizeTextHiragana: 'ã‚„ã0.0015ã¿ã‚Š',
                fact: 'ãƒŸãƒˆã‚³ãƒ³ãƒ‰ãƒªã‚¢ã¯ç´°èƒã®ä¸­ã®ã‚¨ãƒãƒ«ã‚®ãƒ¼å·¥å ´ã€‚å…ƒæ°—ã®ã‚‚ã¨ã‚’ä½œã£ã¦ã„ã¾ã™ï¼',
                factHiragana: 'ã¿ã¨ã“ã‚“ã©ã‚Šã‚ã¯ ã•ã„ã¼ã†ã®ãªã‹ã® ãˆã­ã‚‹ããƒ¼ã“ã†ã˜ã‚‡ã†ã ã‚ˆã€‚ã’ã‚“ãã®ã‚‚ã¨ã‚’ ã¤ãã£ã¦ã‚‹ã‚ˆï¼'
            },
            {
                id: 'dna',
                name: 'DNA',
                hiragana: 'ã§ãƒãƒ¼ãˆã¬ãˆãƒ¼',
                size: 0.000000002,
                emoji: 'ğŸ§¬',
                sizeText: 'ç´„2nmï¼ˆå¹…ï¼‰',
                sizeTextHiragana: 'ã‚„ã0.000002ã¿ã‚Š',
                fact: 'äººé–“ã®DNAã‚’å…¨éƒ¨ã¤ãªã’ã‚‹ã¨ã€å¤ªé™½ã¾ã§ä½•å¾€å¾©ã‚‚ã§ãã‚‹é•·ã•ã«ãªã‚Šã¾ã™ï¼',
                factHiragana: 'ã«ã‚“ã’ã‚“ã® DNAã‚’ ãœã‚“ã¶ã¤ãªã’ã‚‹ã¨ ãŸã„ã‚ˆã†ã¾ã§ ãªã‚“ã‹ã„ã‚‚ ã„ã£ãŸã‚ŠããŸã‚Šã§ãã‚‹ã‚ˆï¼'
            },
            {
                id: 'oxygen',
                name: 'é…¸ç´ åˆ†å­',
                hiragana: 'ã•ã‚“ãã¶ã‚“ã—',
                size: 0.0000000003,
                emoji: 'ğŸ’¨',
                sizeText: 'ç´„0.3nm',
                sizeTextHiragana: 'ã‚„ã0.0000003ã¿ã‚Š',
                fact: 'ç§ãŸã¡ãŒå‘¼å¸ã§å¸ã„è¾¼ã‚€é…¸ç´ ã€‚ç›®ã«ã¯è¦‹ãˆãªã„ã‘ã©ã€ç”Ÿãã‚‹ã®ã«çµ¶å¯¾å¿…è¦ï¼',
                factHiragana: 'ã„ãã‚’ã™ã†ã¨ãã« ã¯ã„ã‚‹ ã•ã‚“ãã€‚ã‚ã«ã¿ãˆãªã„ã‘ã© ã„ãã‚‹ã®ã« ãœã£ãŸã„ã²ã¤ã‚ˆã†ï¼'
            },
            {
                id: 'co2',
                name: 'äºŒé…¸åŒ–ç‚­ç´ åˆ†å­',
                hiragana: 'ã«ã•ã‚“ã‹ãŸã‚“ãã¶ã‚“ã—',
                size: 0.00000000033,
                emoji: 'ğŸ’­',
                sizeText: 'ç´„0.33nm',
                sizeTextHiragana: 'ã‚„ã0.00000033ã¿ã‚Š',
                fact: 'æ¯ã‚’åãã¨ãã«å‡ºã‚‹äºŒé…¸åŒ–ç‚­ç´ ã€‚æ¤ç‰©ã¯ã“ã‚Œã‚’ä½¿ã£ã¦é…¸ç´ ã‚’ä½œã£ã¦ãã‚Œã¾ã™ã€‚',
                factHiragana: 'ã„ãã‚’ ã¯ãã¨ãã«ã§ã‚‹ ã‚‚ã®ã€‚ã—ã‚‡ãã¶ã¤ã¯ ã“ã‚Œã‚’ã¤ã‹ã£ã¦ ã•ã‚“ãã‚’ ã¤ãã£ã¦ãã‚Œã‚‹ã‚ˆã€‚'
            },
            {
                id: 'water',
                name: 'æ°´åˆ†å­',
                hiragana: 'ã¿ãšã¶ã‚“ã—',
                size: 0.000000000275,
                emoji: 'ğŸ’§',
                sizeText: 'ç´„0.275nm',
                sizeTextHiragana: 'ã‚„ã0.000000275ã¿ã‚Š',
                fact: 'æ°´ã¯ç§ãŸã¡ã®ä½“ã®60%ä»¥ä¸Šã‚’å ã‚ã¦ã„ã¾ã™ã€‚æ°´ãŒãªã„ã¨ç”Ÿãã‚‰ã‚Œã¾ã›ã‚“ï¼',
                factHiragana: 'ã¿ãšã¯ ã‹ã‚‰ã ã® ã»ã¨ã‚“ã©ã‚’ ã—ã‚ã¦ã„ã‚‹ã‚ˆã€‚ã¿ãšãŒãªã„ã¨ ã„ãã‚‰ã‚Œãªã„ã­ï¼'
            },
            {
                id: 'hydrogen',
                name: 'æ°´ç´ åŸå­',
                hiragana: 'ã™ã„ãã’ã‚“ã—',
                size: 0.00000000012,
                emoji: 'âš›ï¸',
                sizeText: 'ç´„0.12nm',
                sizeTextHiragana: 'ã‚„ã0.00000012ã¿ã‚Š',
                fact: 'æ°´ç´ ã¯å®‡å®™ã§ä¸€ç•ªãŸãã•ã‚“ã‚ã‚‹å…ƒç´ ã€‚æ˜Ÿã®ææ–™ã§ã‚‚ã‚ã‚Šã¾ã™ã€‚',
                factHiragana: 'ã™ã„ãã¯ ã†ã¡ã‚…ã†ã§ ã„ã¡ã°ã‚“ãŠãŠã„ ã’ã‚“ãã ã‚ˆã€‚ã»ã—ã®ã–ã„ã‚Šã‚‡ã†ã§ã‚‚ã‚ã‚‹ã‚ˆã€‚'
            },
            {
                id: 'carbon',
                name: 'ç‚­ç´ åŸå­',
                hiragana: 'ãŸã‚“ãã’ã‚“ã—',
                size: 0.00000000017,
                emoji: 'â¬›',
                sizeText: 'ç´„0.17nm',
                sizeTextHiragana: 'ã‚„ã0.00000017ã¿ã‚Š',
                fact: 'ç‚­ç´ ã¯ç”Ÿãç‰©ã®ä½“ã‚’ä½œã‚‹åŸºæœ¬ã®ææ–™ã€‚ãƒ€ã‚¤ãƒ¤ãƒ¢ãƒ³ãƒ‰ã‚‚ç‚­ç´ ã§ã§ãã¦ã„ã¾ã™ï¼',
                factHiragana: 'ãŸã‚“ãã¯ ã„ãã‚‚ã®ã® ã‹ã‚‰ã ã‚’ã¤ãã‚‹ ãã»ã‚“ã®ã–ã„ã‚Šã‚‡ã†ã€‚ã ã„ã‚„ã‚‚ã‚“ã©ã‚‚ ãŸã‚“ãã§ã§ãã¦ã‚‹ã‚ˆï¼'
            },
            {
                id: 'proton',
                name: 'é™½å­',
                hiragana: 'ã‚ˆã†ã—',
                size: 0.0000000000000008,
                emoji: 'â•',
                sizeText: 'ç´„0.8fm',
                sizeTextHiragana: 'ã‚„ã0.0000000000008ã¿ã‚Š',
                fact: 'é™½å­ã¯åŸå­ã®ä¸­å¿ƒï¼ˆåŸå­æ ¸ï¼‰ã«ã‚ã‚‹ç²’å­ã€‚ãƒ—ãƒ©ã‚¹ã®é›»æ°—ã‚’æŒã£ã¦ã„ã¾ã™ã€‚',
                factHiragana: 'ã‚ˆã†ã—ã¯ ã’ã‚“ã—ã®ã¾ã‚“ãªã‹ã«ã‚ã‚‹ ã¤ã¶ã¤ã¶ã€‚ã·ã‚‰ã™ã®ã§ã‚“ãã‚’ ã‚‚ã£ã¦ã„ã‚‹ã‚ˆã€‚'
            },
            {
                id: 'neutron',
                name: 'ä¸­æ€§å­',
                hiragana: 'ã¡ã‚…ã†ã›ã„ã—',
                size: 0.0000000000000008,
                emoji: 'âšª',
                sizeText: 'ç´„0.8fm',
                sizeTextHiragana: 'ã‚„ã0.0000000000008ã¿ã‚Š',
                fact: 'ä¸­æ€§å­ã¯é™½å­ã¨ä¸€ç·’ã«åŸå­æ ¸ã‚’ä½œã£ã¦ã„ã‚‹ç²’å­ã€‚é›»æ°—ã‚’æŒã£ã¦ã„ã¾ã›ã‚“ã€‚',
                factHiragana: 'ã¡ã‚…ã†ã›ã„ã—ã¯ ã‚ˆã†ã—ã¨ã„ã£ã—ã‚‡ã« ã’ã‚“ã—ã‹ãã‚’ã¤ãã£ã¦ã„ã‚‹ ã¤ã¶ã¤ã¶ã ã‚ˆã€‚'
            },
            {
                id: 'electron',
                name: 'é›»å­',
                hiragana: 'ã§ã‚“ã—',
                size: 0.000000000000000001,
                emoji: 'â–',
                sizeText: '< 10â»Â¹â¸m',
                sizeTextHiragana: 'ã‚‚ã®ã™ã”ãã¡ã„ã•ã„',
                fact: 'é›»å­ã¯åŸå­ã®å‘¨ã‚Šã‚’é£›ã³å›ã£ã¦ã„ã‚‹ã€ã¨ã¦ã‚‚å°ã•ãªç²’å­ã§ã™ã€‚',
                factHiragana: 'ã§ã‚“ã—ã¯ ã’ã‚“ã—ã®ã¾ã‚ã‚Šã‚’ ã¨ã³ã¾ã‚ã£ã¦ã„ã‚‹ ã¨ã£ã¦ã‚‚ã¡ã„ã•ã„ ã¤ã¶ã¤ã¶ã ã‚ˆã€‚'
            },
            {
                id: 'quark',
                name: 'ã‚¯ã‚©ãƒ¼ã‚¯',
                hiragana: 'ãã‰ãƒ¼ã',
                size: 0.0000000000000000001,
                emoji: 'âœ¨',
                sizeText: '< 10â»Â¹â¹m',
                sizeTextHiragana: 'ã¨ã£ã¦ã‚‚ã¨ã£ã¦ã‚‚ã¡ã„ã•ã„',
                fact: 'ã‚¯ã‚©ãƒ¼ã‚¯ã¯é™½å­ã‚„ä¸­æ€§å­ã‚’ä½œã£ã¦ã„ã‚‹ã€ã‚‚ã£ã¨å°ã•ãªç²’å­ã§ã™ã€‚',
                factHiragana: 'ãã‰ãƒ¼ãã¯ ã‚ˆã†ã—ã‚„ ã¡ã‚…ã†ã›ã„ã—ã‚’ ã¤ãã£ã¦ã„ã‚‹ ã‚‚ã£ã¨ã¡ã„ã•ã„ ã¤ã¶ã¤ã¶ã ã‚ˆã€‚'
            },
            {
                id: 'bigbang',
                name: 'ãƒ“ãƒƒã‚°ãƒãƒ³å‰ã®å®‡å®™',
                hiragana: 'ã³ã£ãã°ã‚“ã¾ãˆã®ã†ã¡ã‚…ã†',
                size: 0.000000000000000000000000000000000016,
                emoji: 'ğŸŒŒ',
                sizeText: 'ç´„10â»Â³âµmï¼ˆãƒ—ãƒ©ãƒ³ã‚¯é•·ï¼‰',
                sizeTextHiragana: 'ãã†ãã†ã§ããªã„ãã‚‰ã„ ã¡ã„ã•ã„',
                fact: 'ãƒ“ãƒƒã‚°ãƒãƒ³å‰ã®å®‡å®™ã¯ã€Œãƒ—ãƒ©ãƒ³ã‚¯é•·ã€ã¨ã„ã†ã€ç‰©ç†å­¦ã§æ„å‘³ã®ã‚ã‚‹æœ€å°ã®é•·ã•ã¾ã§ç¸®ã‚“ã§ã„ãŸã¨è€ƒãˆã‚‰ã‚Œã¦ã„ã¾ã™ã€‚',
                factHiragana: 'ã³ã£ãã°ã‚“ã® ã¾ãˆã¯ã€ã†ã¡ã‚…ã†ãœã‚“ãŸã„ãŒ ã“ã®ã›ã‹ã„ã§ ã„ã¡ã°ã‚“ã¡ã„ã•ã„ã‚‚ã®ã‚ˆã‚Š ã¡ã„ã•ã‹ã£ãŸã‚“ã ã‚ˆï¼ãµã—ãã ã­ï¼'
            }
        ];

        let isHiraganaMode = false;

        // Initialize
        function init() {
            createParticles();
            populateDropdowns();
            updateComparison();
        }

        // Create floating particles
        function createParticles() {
            const container = document.querySelector('.bg-container');
            const colors = ['rgba(0, 229, 255, 0.3)', 'rgba(255, 0, 170, 0.3)', 'rgba(0, 255, 136, 0.3)', 'rgba(255, 230, 0, 0.3)'];

            for (let i = 0; i < 30; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.cssText = `
                    left: ${Math.random() * 100}%;
                    top: ${Math.random() * 100}%;
                    width: ${Math.random() * 10 + 5}px;
                    height: ${Math.random() * 10 + 5}px;
                    background: ${colors[Math.floor(Math.random() * colors.length)]};
                    animation-delay: ${Math.random() * 20}s;
                    animation-duration: ${15 + Math.random() * 10}s;
                `;
                container.appendChild(particle);
            }
        }

        // Populate dropdowns
        function populateDropdowns() {
            const dropdown1 = document.getElementById('item1');
            const dropdown2 = document.getElementById('item2');

            items.forEach((item, index) => {
                const option1 = document.createElement('option');
                option1.value = item.id;
                option1.textContent = `${item.emoji} ${isHiraganaMode ? item.hiragana : item.name}`;
                option1.dataset.hiragana = item.hiragana;
                option1.dataset.name = item.name;
                dropdown1.appendChild(option1);

                const option2 = document.createElement('option');
                option2.value = item.id;
                option2.textContent = `${item.emoji} ${isHiraganaMode ? item.hiragana : item.name}`;
                option2.dataset.hiragana = item.hiragana;
                option2.dataset.name = item.name;
                dropdown2.appendChild(option2);
            });

            // Set default selections
            dropdown1.value = 'egg';
            dropdown2.value = 'ant';
        }

        // Toggle hiragana mode
        function toggleHiraganaMode() {
            isHiraganaMode = !isHiraganaMode;
            document.body.classList.toggle('hiragana-mode', isHiraganaMode);
            document.body.classList.toggle('normal-mode', !isHiraganaMode);
            document.getElementById('hiraganaToggle').classList.toggle('active', isHiraganaMode);

            // Update dropdown options
            const dropdowns = document.querySelectorAll('.dropdown');
            dropdowns.forEach(dropdown => {
                Array.from(dropdown.options).forEach(option => {
                    const item = items.find(i => i.id === option.value);
                    if (item) {
                        option.textContent = `${item.emoji} ${isHiraganaMode ? item.hiragana : item.name}`;
                    }
                });
            });

            updateComparison();
        }

        // Update comparison
        function updateComparison() {
            const item1Id = document.getElementById('item1').value;
            const item2Id = document.getElementById('item2').value;

            const item1 = items.find(i => i.id === item1Id);
            const item2 = items.find(i => i.id === item2Id);

            if (!item1 || !item2) return;

            // Update names
            document.getElementById('name1').textContent = `${item1.emoji} ${isHiraganaMode ? item1.hiragana : item1.name}`;
            document.getElementById('name2').textContent = `${item2.emoji} ${isHiraganaMode ? item2.hiragana : item2.name}`;

            // Update sizes
            document.getElementById('size1').textContent = isHiraganaMode ? item1.sizeTextHiragana : item1.sizeText;
            document.getElementById('size2').textContent = isHiraganaMode ? item2.sizeTextHiragana : item2.sizeText;

            // Calculate ratio
            const ratio = item1.size / item2.size;
            const logRatio = Math.log10(ratio);

            // Update visual circles (size based on log scale, capped)
            const baseSize = 60;
            const maxSize = 150;
            const minSize = 20;

            let size1, size2;
            if (ratio > 1) {
                size1 = maxSize;
                size2 = Math.max(minSize, maxSize / Math.pow(ratio, 0.15));
            } else {
                size2 = maxSize;
                size1 = Math.max(minSize, maxSize * Math.pow(ratio, 0.15));
            }

            const circle1 = document.getElementById('circle1');
            const circle2 = document.getElementById('circle2');

            circle1.style.width = `${size1}px`;
            circle1.style.height = `${size1}px`;
            circle1.textContent = item1.emoji;
            circle1.style.fontSize = `${size1 * 0.4}px`;

            circle2.style.width = `${size2}px`;
            circle2.style.height = `${size2}px`;
            circle2.textContent = item2.emoji;
            circle2.style.fontSize = `${size2 * 0.4}px`;

            // Update result text
            const resultText = document.getElementById('resultText');
            const ratioDisplay = document.getElementById('ratioDisplay');
            const ratioLabel = document.getElementById('ratioLabel');

            const name1 = isHiraganaMode ? item1.hiragana : item1.name;
            const name2 = isHiraganaMode ? item2.hiragana : item2.name;

            if (ratio > 1) {
                const displayRatio = formatRatio(ratio);
                if (isHiraganaMode) {
                    resultText.innerHTML = `<span class="highlight-cyan">${name1}</span>ã¯<br><span class="highlight-magenta">${name2}</span>ã®`;
                    ratioLabel.textContent = 'ã°ã„ ãŠãŠãã„ã‚ˆï¼';
                } else {
                    resultText.innerHTML = `<span class="highlight-cyan">${name1}</span>ã¯<br><span class="highlight-magenta">${name2}</span>ã®`;
                    ratioLabel.textContent = 'å€ å¤§ãã„ï¼';
                }
                ratioDisplay.textContent = displayRatio;
            } else if (ratio < 1) {
                const displayRatio = formatRatio(1 / ratio);
                if (isHiraganaMode) {
                    resultText.innerHTML = `<span class="highlight-cyan">${name1}</span>ã¯<br><span class="highlight-magenta">${name2}</span>ã®`;
                    ratioLabel.textContent = 'ã¶ã‚“ã®1 ã¡ã„ã•ã„ã‚ˆï¼';
                } else {
                    resultText.innerHTML = `<span class="highlight-cyan">${name1}</span>ã¯<br><span class="highlight-magenta">${name2}</span>ã®`;
                    ratioLabel.textContent = 'åˆ†ã®1 å°ã•ã„ï¼';
                }
                ratioDisplay.textContent = displayRatio;
            } else {
                if (isHiraganaMode) {
                    resultText.innerHTML = `<span class="highlight-cyan">${name1}</span>ã¨<br><span class="highlight-magenta">${name2}</span>ã¯`;
                    ratioLabel.textContent = '';
                } else {
                    resultText.innerHTML = `<span class="highlight-cyan">${name1}</span>ã¨<br><span class="highlight-magenta">${name2}</span>ã¯`;
                    ratioLabel.textContent = '';
                }
                ratioDisplay.textContent = isHiraganaMode ? 'ãŠãªã˜ãŠãŠãã•ï¼' : 'åŒã˜å¤§ãã•ï¼';
            }

            // Update scale markers
            const minLog = -35;
            const maxLog = -1;
            const range = maxLog - minLog;

            const log1 = Math.log10(item1.size);
            const log2 = Math.log10(item2.size);

            const pos1 = ((log1 - minLog) / range) * 100;
            const pos2 = ((log2 - minLog) / range) * 100;

            document.getElementById('marker1').style.left = `${Math.max(2, Math.min(98, pos1))}%`;
            document.getElementById('marker2').style.left = `${Math.max(2, Math.min(98, pos2))}%`;

            // Update fun fact
            const funFactText = document.getElementById('funFactText');
            const randomItem = Math.random() > 0.5 ? item1 : item2;
            funFactText.textContent = isHiraganaMode ? randomItem.factHiragana : randomItem.fact;
        }

        // Format ratio for display
        function formatRatio(ratio) {
            if (ratio >= 1000000000) {
                return (ratio / 1000000000).toFixed(0) + '0å„„';
            } else if (ratio >= 100000000) {
                return (ratio / 100000000).toFixed(0) + 'å„„';
            } else if (ratio >= 10000000) {
                return (ratio / 10000000).toFixed(0) + '000ä¸‡';
            } else if (ratio >= 1000000) {
                return (ratio / 1000000).toFixed(0) + '00ä¸‡';
            } else if (ratio >= 100000) {
                return (ratio / 100000).toFixed(0) + '0ä¸‡';
            } else if (ratio >= 10000) {
                return (ratio / 10000).toFixed(1) + 'ä¸‡';
            } else if (ratio >= 1000) {
                return ratio.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g, ',');
            } else if (ratio >= 100) {
                return ratio.toFixed(0);
            } else if (ratio >= 10) {
                return ratio.toFixed(1);
            } else {
                return ratio.toFixed(2);
            }
        }

        // Initialize on load
        window.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
